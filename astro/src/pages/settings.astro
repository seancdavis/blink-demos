---
import Layout from '@components/Layout.astro'
import SettingsForm from '@components/SettingsForm'
import { setFeedback } from '@utils/feedback'
import { beforePageLoad } from '@utils/page-hooks'
import '../styles/global.css'

const { feedback, user } = await beforePageLoad({ cookies: Astro.cookies })

if (!user) {
  setFeedback({ cookies: Astro.cookies, value: 'login_required' })
  return Astro.redirect('/login')
}
---

<Layout title="Settings" feedback={feedback} user={user}>
  <div class="container-xs">
    <h1>Edit profile</h1>
    <SettingsForm client:load />
  </div>
</Layout>

